{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to the MZmine 3 wiki! \u00b6 Here you can find general processing guides, module documentations and video tutorials. Test if auto deploy works","title":"Home page"},{"location":"#welcome-to-the-mzmine-3-wiki","text":"Here you can find general processing guides, module documentations and video tutorials. Test if auto deploy works","title":"Welcome to the MZmine 3 wiki!"},{"location":"Ion-mobility-data-processing-workflow/","text":"LC-IMS-MS Workflow \u00b6 Supported formats \u00b6 Vendor formats: * .tdf (Native Bruker LC-IMS-MS and MALDI-IMS-MSI format) * .tsf (Native Bruker MALDI-IMS-MS (single shot) format) .mzML * Created via MSConvert from native Bruker data * Created via MSConvert from native Waters data Note : mzML via MSConvert from Agilent raw data can be imported, but certain restrictions might hinder processsing workflows due to the nature of the raw data format. Background information and terminology \u00b6 Since ion mobility spectrometry (IMS) resolved data is more complex due to the additional dimension when compared to regular LC-MS data, some terms shall be clarified before going into details of the processing steps. Mobility separation and data format \u00b6 Ion mobility separation usually occurs on the millisecond timescale, fitting nicely in-between liquid chromatography (LC) (few seconds per chromatographic peak) and mass spectra acquisition of TOF instruments (several micro seconds). Therefore, the mobility dimension can be resolved by acquiring multiple spectra during a mobility separation (e.g. 1000 spectra per 100 ms). This leads to multiple mass spectra acquired at one IMS accumulation. Thus, at one retention time, multiple spectra are acquired. A detailed comparison of LC-MS and LC-IMS-MS raw data can be found here . Frames and Mobility Scans \u00b6 During one IMS accumulation and separation, multiple mass spectra are acquired to resolve the mobility dimension. All mass spectra acquired during one mobility separation are termed \" mobility scans \" in MZmine. The agglomerate of all mobility scans for one IMS accumulation are called \" frame \". All mobility scans of a single frame can be summed, to represent a single mass spectrum as in classic LC-MS. Mobilograms \u00b6 A \" mobilogram \" represents the intensity of an m/z or m/z range along the mobility axis. A mobilogram may be build from multiple frames and summed or built from a single frame. Ion mobility traces \u00b6 An \" ion mobility trace \" basically represents a mobility resolved extracted ion chromatogram (EIC). Raw data processing \u00b6 Raw data import \u00b6 As any other data format, ion mobility data can be imported via the main menu Raw data methods \u2192 Raw data import . Note that multiple .tdf data folders can be dropped into the MS data (advanced) dialog. The Bruker TDF import can only select a single folder. When using the MS data (advanced) dialog, inexperienced users should deactivate the direct mass detection steps, since they alter the raw data on the import. Mass detection is then performend, when the scans are loaded and only peaks above the noise level are imported. Alternatively, you can simply drag & drop the raw data into the raw data list of the main window. Mass detection \u00b6 The mass detection steps perform noise filtering (by a threshold) and centroiding of profile raw data. Native Bruker raw data is already centroided, therefore the centroid mass detector should be used. Waters .mzML raw data might come as profile data, which requires a different mass detector such as exact mass . The mass detection is launched via Raw data methods \u2192 Mass detection \u2192 Mass detection ([1] in the figure). In the dropdown menu [2], an applicable mass detector should be chosen and configured via the Setup button [2]. By selecting the Show preview checkbox, a scan can be selected to adjust the noise level. Note that a mobility scan should be selected to determine the noise level. However, the same noise level will be applied to frames, too. The output of the mass detection step, can be referred to as mass list , since it will only contain a list of selected m/z values. Setting the noise level \u00b6 Choose the noise level to detect (= red dot) actual peaks but filter out detector noise. The detector noise is usually determined by a lot of signals of the same intensity. Mobility scan merging \u00b6 If a .mzML file is imported, the merged frame spectrum must be created via the File merging \u2192 Mobility scan merging module. This is required to gain access to MZmine's regular LC-MS functionality. This step uses the centroided and thresholded data produced by the mass detection step. This step is not required when importing native Bruker .tdf or .tsf data from .d folders. When importing native Bruker data, a merged spectrum for the frame is created automatically by the vendor library. Feature detection workflows \u00b6 Ion mobility data can be processed in MZmine 3 in two ways. The first few steps are different for the two workflows. LC-IMS-MS workflow via Ion mobility trace builder / Recursive IMS builder directly build ion mobility traces (rt and mobility dimension) smoothing (optional) resolve retention time dimension smoothing (optional) resolve mobility dimension smoothing (optional) Regular LC-MS workflow via ADAP Chromatogram builder and IMS expander build extracted ion chromatograms (rt dimension) from frame spectra requires merged frame spectra (see mobility scan merging ) smoothing (optional) resolve retention time dimension expand features into mobility dimension smoothing (optional) resolve mobility dimension smoothing (optional) While these lists might seem fairly similar, there are some differences in the processing approach. The LC-IMS-MS workflow builds ion mobility traces from the data in the mobility scans, whilst the LC-MS workflow builds EICs from the summed frames. Imagine setting the noise level to 200 and occurs in 15 mobility scans with an intensity of 180 and in 20 with > 200, but the ion mobility trace builder required at least 25 data points. At the same time, the ADAP chromatogram builder was set to a minimum highest intensity of 1000 in a frame, which might have been reached due to summed intensities. Since intensities are summed to build frames, the LC-MS workflow can be more sensitive to less abundant compounds whilst the LC-IMS-MS workflow will directly detect ion mobility traces and be less susceptible to noise. For .mzML data, this might not make a significant impact, because the frame is built from the thresholded mass list. This means that the main impact on sensitivity for low intense compounds is made by the user's noise level selection. However, for native Bruker raw data, the summed frame is automatically built via the functionality of the vendor library without the user's influence. Therefore, the more low abundant compounds might be detected, if the LC-MS workflow is chosen. LC-IMS-MS workflow \u00b6 The LC-IMS-MS workflow will directly build ion mobility traces from the raw data in the mobility scans. This workflow does not necessarily require summed frame spectra. However, if extracted ion chromatograms shall be visualized via the Chromatogram visualizer , the frame intensities are used. In case these are not present, the chromatograms will be blank. Note that feature intensities from the LC-IMS-MS workflow might not exactly match the frame chromatograms due to summing being executed prior to thresholding (for native Bruker data). Furthermore, multiple isomers might hide behind a single chromatographic peak. Ion mobility trace builder \u00b6 The Ion mobility trace builder will build ion mobility traces from the raw data. Alternatively, the Recursive IMS builder can be used, which requires less ram but takes longer. The Ion mobility trace builder is found under Feature detection \u2192 LC-IMS-MS \u2192 Ion mobility trace builder . Scan selection \u00b6 The scan selection parameter specifies the scans that shall be processed for feature detection. Usually, setting the ms level to 1 is sufficient. If a calibration segment is present, it can be cut out via the retention time filter in the scan selection. m/z tolerance \u00b6 The m/z tolerance specifies the scan-to-scan tolerance for ion mobility traces. This tolerance window may need to be set higher that for classic LC-MS feature detection (e.g. to 0.005 m/z and 15-20 ppm instead of 10 ppm) due to lower intensities therefore less accuracy in individual mobility scans compared to LC-MS scans. Note that the overall accuracy is achieved via LC-IMS-MS is the same due to the higher number of scans. Minimum consecutive retention time data points \u00b6 This parameter specifies the number of consecutive detections of the same m/z value in a chromatographic peak (rt dimension only). This means that a single m/z has to be detected in, e.g, 5 frames with an intensity higher than zero. This parameter helps to filter noise. Consecutive detections in the mobility dimension do not affect this parameter. Usually no less than 5 should be set here if the MS1 acquisition rate is sufficient. Minimum total signals \u00b6 Specifies the total number of peaks in the mobility dimension in all mobility scans. Every \"dot\" in an ion mobility trace represents a single datapoint. ( see ion mobility traces ) Advanced parameters \u00b6 For most applications, these parameters do not need to set/altered. For high mobility resolved data the mobilograms might become noisy due to less ions reaching the detector at the same time. By default, the number of binned scans is set to cover about 0.0008 Vs/cm^2 per bin. The effect of binning can be seen here . If you are unsure about the nature of your data, you can perform trace building with the standard parameters and apply/preview the binning afterwards via the Feature detection \u2192 Mobilogram binning module. Processing result \u00b6 After performing ion mobiltiy trace detection, a feature list is created in the feature list tab (see feature lists tab ). In the feature table, multiple columns are created. The displayed columns can be set via the button on the right of the feature table ([1]). The shapes displays an EIC of the ion mobility trace (intensities summed in rt dimension). The mobilograms column shows a mobilogram for the ion mobility trace (intensities summed in mobility dimension). The shapes and projections can be smoothed and resolved. However, the ion mobility trace is always represented by the raw data and remains unaltered. After resolving, the shapes and mobilograms have to be recalculated from the raw data, which is why the smoothing is lost after resolving. Smoothing in retention time dimension (optional) \u00b6 The necessity of smoothing in RT dimension is determined by the noisiness of chromatographic peaks. These can be influenced by the overall spray stability, instrument accumulation times, transfer efficiency and many more. The number of data points to be smoothed in rt dimension can be set at [1]. Note that the correct preview dimension is selected at [2]. For large batch modes, the Remove original feature list parameter should be selected. While parameters are being optimised, this is not recommended, because removing a feature list cannot be undone. Resolving in retention time dimension \u00b6 Here, the Feature detection \u2192 Resolving \u2192 Local minimum resolver is used. However, the ADAP resolver also produces great results, but takes longer to process. Resolving traces/chromatograms into individual features, is one of the most crucial steps of data processing. Well optimised parameters [1] can lead to recognition of all good features in a \"good\" EICs [2] and to few noise recognised as feature in EIC that also contains chromatographic noise [3]. On the other hand, poorly optimised parameters [4] can still lead to recognition of all features in a good EIC [5], but recognise a lot of noise as feature in a noisy EIC [6]. Therefore, we recommend optimising the parameters on good EICs and checking the results of these parameters with a noisy EIC. Most of the time, a noisy EIC can be found by sorting the feature table by decreasing area. MS/MS scan paring \u00b6 Selecting this parameter will pair DDA MS/MS spectra to the resolved features. This is optional at this stage, because it will be executed again during resolving in the mobility dimension. Dimension \u00b6 The dimension to be resolved can be selected here. Select Retention time for now. Chromatographic threshold \u00b6 This parameter is crucial for removing noise from chromatograms. If this parameter is set to, e.g., 50, the lowest 50 % of intensities will be removed. Since the all retention time in the data file are used for this determination, this value should be rather high (e.g., 95 %) to begin with and only lowered if necessary. Search minimum rt range (min) \u00b6 Determines the step size that will be scanned for individual peaks. Setting this value too low, can cause peak edges to be cut off, setting it too high might lead to incomplete separation of narrowly eluting compounds. Minimum relative height \u00b6 Determines the minimum relative intensity of a individual feature in relation to the highest intensity in the chromatogram. May lead to discrimination of low intensity features. Minimum absolute height \u00b6 Determines the minimum absolute intensity of a feature to be recognised by the algorithm. This parameter depends on what you want to detect, the instrument and detector type. Usually, Orbitrap instruments report higher intensities that TOF instruments. However, the noise level is also higher for Orbitrap than for TOF instruments. For TOF instruments 1E3 or even 5E2 can be appropriate, whilst Orbitraps can require 1E5 or 5E4. Min ration of peak top/edge \u00b6 Describes the minimum ratio of the highest point of a peak to the lowest point of a peak. This mostly affects detection of low intensity and not-baseline-resolved signals and should be optimised using such a signal as an example. Peak duration range \u00b6 Describes valid peak lengths. Can be used to filter out very short or long noise signals. Minimum number of data points \u00b6 Can be used in addition to Peak duration range to filter out noise. Should be set no lower than 5 in most cases. Smoothing in mobility dimension (optional) \u00b6 After resolving a feature in RT dimension, the mobilograms will be recalculated from the from the raw data (the resolved ion mobility trace). Therefore, a smoothing step is necessary if the data requires it. The smoothing dialog is opened via Feature detection \u2192 Smoothing Select to smooth the mobility dimension [1] and select it as preview dimension [2]. The filter with depends on the number of spectra acquired in the observed mobility range. Usually, a value between 5 and 15 should be appropriate. Resolving in mobility dimension \u00b6 In general, the same principles apply as in the retention time resolving step. However, a few differences shall be noted. In the screenshot you can also see, that the resolved mobilograms are recalculated from the raw data and previously apply smoothing steps are therefore lost and must be reapplied if necessary. Dimension \u00b6 Mobility has to be selected as a dimension to resolve mobilograms [1]. Chromatographic threshold \u00b6 Since there are less scans in mobility dimension (e.g., 400 - >1000 per frame, depending on the instrument type and setting) than in rt dimension (e.g. 5000 for LC-MS depending on acquisition rate), the threshold should be lowered to 80 or less. Search minimum range \u00b6 This value determines the search range in mobility dimension. Therefore, this value has to be set lower when resolving a TIMS (Bruker data) mobilogram, because the absolute numerical values are smaller (e.g., 0.01). When resolving mobilograms from Waters or Agilent data (mobility as drift time in ms), the values are higher and must therefore be increased. Other parameters such as minimum intensities or minimum number of data points should be adjusted depending on what you want to detect. Smoothing in rt and mobility dimension (optional) \u00b6 Some recognised features might have rather noisy signals (in rt and mobility dimension) after the mobility resolving step. If smoother shapes are required, the smoothing can be reapplied afterwards. In that case, smoothing can be applied to both dimensions at once. LC-MS workflow \u00b6 LC-IMS-MS data can also be processed via the regular LC-MS modules. If necessary, detected features can be expanded into the mobility dimension. For this workflow, generation of summed frame spectra via the Mobility scan merging module is a mandatory step, if the data was imported from an .mzML file (automatically generated via native Bruker import). ADAP chromatogram builder \u00b6 Graphical comparison of LC-MS and LC-IMS-MS data \u00b6 Classic LC-MS data consists of three dimensions: m/z, intensity, and retention time. At every retention time, a whole mass spectrum is acquired (yellow). Putting all scans together creates a three-dimensional plane. By slicing the three-dimensional data at a single m/z (+- a tolerance), EICs can be created (green). On the other hand, ion mobility resolved data consists of a three-dimensional data plane at each retention time. The three dimensions being m/z, intentsity, and mobility (as drift time (ms) or inverse reduced mobility 1/k0 [Vs/(cm^2)]). The 3D projection of regular LC-MS data can be created by summing all mobility scans of a frame to create a frame spectrum. (see Mobility scan merging )","title":"LC-IMS-MS workflow"},{"location":"Ion-mobility-data-processing-workflow/#lc-ims-ms-workflow","text":"","title":"LC-IMS-MS Workflow"},{"location":"Ion-mobility-data-processing-workflow/#supported-formats","text":"Vendor formats: * .tdf (Native Bruker LC-IMS-MS and MALDI-IMS-MSI format) * .tsf (Native Bruker MALDI-IMS-MS (single shot) format) .mzML * Created via MSConvert from native Bruker data * Created via MSConvert from native Waters data Note : mzML via MSConvert from Agilent raw data can be imported, but certain restrictions might hinder processsing workflows due to the nature of the raw data format.","title":"Supported formats"},{"location":"Ion-mobility-data-processing-workflow/#background-information-and-terminology","text":"Since ion mobility spectrometry (IMS) resolved data is more complex due to the additional dimension when compared to regular LC-MS data, some terms shall be clarified before going into details of the processing steps.","title":"Background information and terminology"},{"location":"Ion-mobility-data-processing-workflow/#mobility-separation-and-data-format","text":"Ion mobility separation usually occurs on the millisecond timescale, fitting nicely in-between liquid chromatography (LC) (few seconds per chromatographic peak) and mass spectra acquisition of TOF instruments (several micro seconds). Therefore, the mobility dimension can be resolved by acquiring multiple spectra during a mobility separation (e.g. 1000 spectra per 100 ms). This leads to multiple mass spectra acquired at one IMS accumulation. Thus, at one retention time, multiple spectra are acquired. A detailed comparison of LC-MS and LC-IMS-MS raw data can be found here .","title":"Mobility separation and data format"},{"location":"Ion-mobility-data-processing-workflow/#frames-and-mobility-scans","text":"During one IMS accumulation and separation, multiple mass spectra are acquired to resolve the mobility dimension. All mass spectra acquired during one mobility separation are termed \" mobility scans \" in MZmine. The agglomerate of all mobility scans for one IMS accumulation are called \" frame \". All mobility scans of a single frame can be summed, to represent a single mass spectrum as in classic LC-MS.","title":"Frames and Mobility Scans"},{"location":"Ion-mobility-data-processing-workflow/#mobilograms","text":"A \" mobilogram \" represents the intensity of an m/z or m/z range along the mobility axis. A mobilogram may be build from multiple frames and summed or built from a single frame.","title":"Mobilograms"},{"location":"Ion-mobility-data-processing-workflow/#ion-mobility-traces","text":"An \" ion mobility trace \" basically represents a mobility resolved extracted ion chromatogram (EIC).","title":"Ion mobility traces"},{"location":"Ion-mobility-data-processing-workflow/#raw-data-processing","text":"","title":"Raw data processing"},{"location":"Ion-mobility-data-processing-workflow/#raw-data-import","text":"As any other data format, ion mobility data can be imported via the main menu Raw data methods \u2192 Raw data import . Note that multiple .tdf data folders can be dropped into the MS data (advanced) dialog. The Bruker TDF import can only select a single folder. When using the MS data (advanced) dialog, inexperienced users should deactivate the direct mass detection steps, since they alter the raw data on the import. Mass detection is then performend, when the scans are loaded and only peaks above the noise level are imported. Alternatively, you can simply drag & drop the raw data into the raw data list of the main window.","title":"Raw data import"},{"location":"Ion-mobility-data-processing-workflow/#mass-detection","text":"The mass detection steps perform noise filtering (by a threshold) and centroiding of profile raw data. Native Bruker raw data is already centroided, therefore the centroid mass detector should be used. Waters .mzML raw data might come as profile data, which requires a different mass detector such as exact mass . The mass detection is launched via Raw data methods \u2192 Mass detection \u2192 Mass detection ([1] in the figure). In the dropdown menu [2], an applicable mass detector should be chosen and configured via the Setup button [2]. By selecting the Show preview checkbox, a scan can be selected to adjust the noise level. Note that a mobility scan should be selected to determine the noise level. However, the same noise level will be applied to frames, too. The output of the mass detection step, can be referred to as mass list , since it will only contain a list of selected m/z values.","title":"Mass detection"},{"location":"Ion-mobility-data-processing-workflow/#setting-the-noise-level","text":"Choose the noise level to detect (= red dot) actual peaks but filter out detector noise. The detector noise is usually determined by a lot of signals of the same intensity.","title":"Setting the noise level"},{"location":"Ion-mobility-data-processing-workflow/#mobility-scan-merging","text":"If a .mzML file is imported, the merged frame spectrum must be created via the File merging \u2192 Mobility scan merging module. This is required to gain access to MZmine's regular LC-MS functionality. This step uses the centroided and thresholded data produced by the mass detection step. This step is not required when importing native Bruker .tdf or .tsf data from .d folders. When importing native Bruker data, a merged spectrum for the frame is created automatically by the vendor library.","title":"Mobility scan merging"},{"location":"Ion-mobility-data-processing-workflow/#feature-detection-workflows","text":"Ion mobility data can be processed in MZmine 3 in two ways. The first few steps are different for the two workflows. LC-IMS-MS workflow via Ion mobility trace builder / Recursive IMS builder directly build ion mobility traces (rt and mobility dimension) smoothing (optional) resolve retention time dimension smoothing (optional) resolve mobility dimension smoothing (optional) Regular LC-MS workflow via ADAP Chromatogram builder and IMS expander build extracted ion chromatograms (rt dimension) from frame spectra requires merged frame spectra (see mobility scan merging ) smoothing (optional) resolve retention time dimension expand features into mobility dimension smoothing (optional) resolve mobility dimension smoothing (optional) While these lists might seem fairly similar, there are some differences in the processing approach. The LC-IMS-MS workflow builds ion mobility traces from the data in the mobility scans, whilst the LC-MS workflow builds EICs from the summed frames. Imagine setting the noise level to 200 and occurs in 15 mobility scans with an intensity of 180 and in 20 with > 200, but the ion mobility trace builder required at least 25 data points. At the same time, the ADAP chromatogram builder was set to a minimum highest intensity of 1000 in a frame, which might have been reached due to summed intensities. Since intensities are summed to build frames, the LC-MS workflow can be more sensitive to less abundant compounds whilst the LC-IMS-MS workflow will directly detect ion mobility traces and be less susceptible to noise. For .mzML data, this might not make a significant impact, because the frame is built from the thresholded mass list. This means that the main impact on sensitivity for low intense compounds is made by the user's noise level selection. However, for native Bruker raw data, the summed frame is automatically built via the functionality of the vendor library without the user's influence. Therefore, the more low abundant compounds might be detected, if the LC-MS workflow is chosen.","title":"Feature detection workflows"},{"location":"Ion-mobility-data-processing-workflow/#lc-ims-ms-workflow_1","text":"The LC-IMS-MS workflow will directly build ion mobility traces from the raw data in the mobility scans. This workflow does not necessarily require summed frame spectra. However, if extracted ion chromatograms shall be visualized via the Chromatogram visualizer , the frame intensities are used. In case these are not present, the chromatograms will be blank. Note that feature intensities from the LC-IMS-MS workflow might not exactly match the frame chromatograms due to summing being executed prior to thresholding (for native Bruker data). Furthermore, multiple isomers might hide behind a single chromatographic peak.","title":"LC-IMS-MS workflow"},{"location":"Ion-mobility-data-processing-workflow/#ion-mobility-trace-builder","text":"The Ion mobility trace builder will build ion mobility traces from the raw data. Alternatively, the Recursive IMS builder can be used, which requires less ram but takes longer. The Ion mobility trace builder is found under Feature detection \u2192 LC-IMS-MS \u2192 Ion mobility trace builder .","title":"Ion mobility trace builder"},{"location":"Ion-mobility-data-processing-workflow/#scan-selection","text":"The scan selection parameter specifies the scans that shall be processed for feature detection. Usually, setting the ms level to 1 is sufficient. If a calibration segment is present, it can be cut out via the retention time filter in the scan selection.","title":"Scan selection"},{"location":"Ion-mobility-data-processing-workflow/#mz-tolerance","text":"The m/z tolerance specifies the scan-to-scan tolerance for ion mobility traces. This tolerance window may need to be set higher that for classic LC-MS feature detection (e.g. to 0.005 m/z and 15-20 ppm instead of 10 ppm) due to lower intensities therefore less accuracy in individual mobility scans compared to LC-MS scans. Note that the overall accuracy is achieved via LC-IMS-MS is the same due to the higher number of scans.","title":"m/z tolerance"},{"location":"Ion-mobility-data-processing-workflow/#minimum-consecutive-retention-time-data-points","text":"This parameter specifies the number of consecutive detections of the same m/z value in a chromatographic peak (rt dimension only). This means that a single m/z has to be detected in, e.g, 5 frames with an intensity higher than zero. This parameter helps to filter noise. Consecutive detections in the mobility dimension do not affect this parameter. Usually no less than 5 should be set here if the MS1 acquisition rate is sufficient.","title":"Minimum consecutive retention time data points"},{"location":"Ion-mobility-data-processing-workflow/#minimum-total-signals","text":"Specifies the total number of peaks in the mobility dimension in all mobility scans. Every \"dot\" in an ion mobility trace represents a single datapoint. ( see ion mobility traces )","title":"Minimum total signals"},{"location":"Ion-mobility-data-processing-workflow/#advanced-parameters","text":"For most applications, these parameters do not need to set/altered. For high mobility resolved data the mobilograms might become noisy due to less ions reaching the detector at the same time. By default, the number of binned scans is set to cover about 0.0008 Vs/cm^2 per bin. The effect of binning can be seen here . If you are unsure about the nature of your data, you can perform trace building with the standard parameters and apply/preview the binning afterwards via the Feature detection \u2192 Mobilogram binning module.","title":"Advanced parameters"},{"location":"Ion-mobility-data-processing-workflow/#processing-result","text":"After performing ion mobiltiy trace detection, a feature list is created in the feature list tab (see feature lists tab ). In the feature table, multiple columns are created. The displayed columns can be set via the button on the right of the feature table ([1]). The shapes displays an EIC of the ion mobility trace (intensities summed in rt dimension). The mobilograms column shows a mobilogram for the ion mobility trace (intensities summed in mobility dimension). The shapes and projections can be smoothed and resolved. However, the ion mobility trace is always represented by the raw data and remains unaltered. After resolving, the shapes and mobilograms have to be recalculated from the raw data, which is why the smoothing is lost after resolving.","title":"Processing result"},{"location":"Ion-mobility-data-processing-workflow/#smoothing-in-retention-time-dimension-optional","text":"The necessity of smoothing in RT dimension is determined by the noisiness of chromatographic peaks. These can be influenced by the overall spray stability, instrument accumulation times, transfer efficiency and many more. The number of data points to be smoothed in rt dimension can be set at [1]. Note that the correct preview dimension is selected at [2]. For large batch modes, the Remove original feature list parameter should be selected. While parameters are being optimised, this is not recommended, because removing a feature list cannot be undone.","title":"Smoothing in retention time dimension (optional)"},{"location":"Ion-mobility-data-processing-workflow/#resolving-in-retention-time-dimension","text":"Here, the Feature detection \u2192 Resolving \u2192 Local minimum resolver is used. However, the ADAP resolver also produces great results, but takes longer to process. Resolving traces/chromatograms into individual features, is one of the most crucial steps of data processing. Well optimised parameters [1] can lead to recognition of all good features in a \"good\" EICs [2] and to few noise recognised as feature in EIC that also contains chromatographic noise [3]. On the other hand, poorly optimised parameters [4] can still lead to recognition of all features in a good EIC [5], but recognise a lot of noise as feature in a noisy EIC [6]. Therefore, we recommend optimising the parameters on good EICs and checking the results of these parameters with a noisy EIC. Most of the time, a noisy EIC can be found by sorting the feature table by decreasing area.","title":"Resolving in retention time dimension"},{"location":"Ion-mobility-data-processing-workflow/#msms-scan-paring","text":"Selecting this parameter will pair DDA MS/MS spectra to the resolved features. This is optional at this stage, because it will be executed again during resolving in the mobility dimension.","title":"MS/MS scan paring"},{"location":"Ion-mobility-data-processing-workflow/#dimension","text":"The dimension to be resolved can be selected here. Select Retention time for now.","title":"Dimension"},{"location":"Ion-mobility-data-processing-workflow/#chromatographic-threshold","text":"This parameter is crucial for removing noise from chromatograms. If this parameter is set to, e.g., 50, the lowest 50 % of intensities will be removed. Since the all retention time in the data file are used for this determination, this value should be rather high (e.g., 95 %) to begin with and only lowered if necessary.","title":"Chromatographic threshold"},{"location":"Ion-mobility-data-processing-workflow/#search-minimum-rt-range-min","text":"Determines the step size that will be scanned for individual peaks. Setting this value too low, can cause peak edges to be cut off, setting it too high might lead to incomplete separation of narrowly eluting compounds.","title":"Search minimum rt range (min)"},{"location":"Ion-mobility-data-processing-workflow/#minimum-relative-height","text":"Determines the minimum relative intensity of a individual feature in relation to the highest intensity in the chromatogram. May lead to discrimination of low intensity features.","title":"Minimum relative height"},{"location":"Ion-mobility-data-processing-workflow/#minimum-absolute-height","text":"Determines the minimum absolute intensity of a feature to be recognised by the algorithm. This parameter depends on what you want to detect, the instrument and detector type. Usually, Orbitrap instruments report higher intensities that TOF instruments. However, the noise level is also higher for Orbitrap than for TOF instruments. For TOF instruments 1E3 or even 5E2 can be appropriate, whilst Orbitraps can require 1E5 or 5E4.","title":"Minimum absolute height"},{"location":"Ion-mobility-data-processing-workflow/#min-ration-of-peak-topedge","text":"Describes the minimum ratio of the highest point of a peak to the lowest point of a peak. This mostly affects detection of low intensity and not-baseline-resolved signals and should be optimised using such a signal as an example.","title":"Min ration of peak top/edge"},{"location":"Ion-mobility-data-processing-workflow/#peak-duration-range","text":"Describes valid peak lengths. Can be used to filter out very short or long noise signals.","title":"Peak duration range"},{"location":"Ion-mobility-data-processing-workflow/#minimum-number-of-data-points","text":"Can be used in addition to Peak duration range to filter out noise. Should be set no lower than 5 in most cases.","title":"Minimum number of data points"},{"location":"Ion-mobility-data-processing-workflow/#smoothing-in-mobility-dimension-optional","text":"After resolving a feature in RT dimension, the mobilograms will be recalculated from the from the raw data (the resolved ion mobility trace). Therefore, a smoothing step is necessary if the data requires it. The smoothing dialog is opened via Feature detection \u2192 Smoothing Select to smooth the mobility dimension [1] and select it as preview dimension [2]. The filter with depends on the number of spectra acquired in the observed mobility range. Usually, a value between 5 and 15 should be appropriate.","title":"Smoothing  in mobility dimension (optional)"},{"location":"Ion-mobility-data-processing-workflow/#resolving-in-mobility-dimension","text":"In general, the same principles apply as in the retention time resolving step. However, a few differences shall be noted. In the screenshot you can also see, that the resolved mobilograms are recalculated from the raw data and previously apply smoothing steps are therefore lost and must be reapplied if necessary.","title":"Resolving in mobility dimension"},{"location":"Ion-mobility-data-processing-workflow/#dimension_1","text":"Mobility has to be selected as a dimension to resolve mobilograms [1].","title":"Dimension"},{"location":"Ion-mobility-data-processing-workflow/#chromatographic-threshold_1","text":"Since there are less scans in mobility dimension (e.g., 400 - >1000 per frame, depending on the instrument type and setting) than in rt dimension (e.g. 5000 for LC-MS depending on acquisition rate), the threshold should be lowered to 80 or less.","title":"Chromatographic threshold"},{"location":"Ion-mobility-data-processing-workflow/#search-minimum-range","text":"This value determines the search range in mobility dimension. Therefore, this value has to be set lower when resolving a TIMS (Bruker data) mobilogram, because the absolute numerical values are smaller (e.g., 0.01). When resolving mobilograms from Waters or Agilent data (mobility as drift time in ms), the values are higher and must therefore be increased. Other parameters such as minimum intensities or minimum number of data points should be adjusted depending on what you want to detect.","title":"Search minimum range"},{"location":"Ion-mobility-data-processing-workflow/#smoothing-in-rt-and-mobility-dimension-optional","text":"Some recognised features might have rather noisy signals (in rt and mobility dimension) after the mobility resolving step. If smoother shapes are required, the smoothing can be reapplied afterwards. In that case, smoothing can be applied to both dimensions at once.","title":"Smoothing in rt and mobility dimension (optional)"},{"location":"Ion-mobility-data-processing-workflow/#lc-ms-workflow","text":"LC-IMS-MS data can also be processed via the regular LC-MS modules. If necessary, detected features can be expanded into the mobility dimension. For this workflow, generation of summed frame spectra via the Mobility scan merging module is a mandatory step, if the data was imported from an .mzML file (automatically generated via native Bruker import).","title":"LC-MS workflow"},{"location":"Ion-mobility-data-processing-workflow/#adap-chromatogram-builder","text":"","title":"ADAP chromatogram builder"},{"location":"Ion-mobility-data-processing-workflow/#graphical-comparison-of-lc-ms-and-lc-ims-ms-data","text":"Classic LC-MS data consists of three dimensions: m/z, intensity, and retention time. At every retention time, a whole mass spectrum is acquired (yellow). Putting all scans together creates a three-dimensional plane. By slicing the three-dimensional data at a single m/z (+- a tolerance), EICs can be created (green). On the other hand, ion mobility resolved data consists of a three-dimensional data plane at each retention time. The three dimensions being m/z, intentsity, and mobility (as drift time (ms) or inverse reduced mobility 1/k0 [Vs/(cm^2)]). The 3D projection of regular LC-MS data can be created by summing all mobility scans of a frame to create a frame spectrum. (see Mobility scan merging )","title":"Graphical comparison of LC-MS and LC-IMS-MS data"},{"location":"Main-window-overview/","text":"Main window overview \u00b6 The MZmine 3 man window is made up of mainly four important building blocks. MS data files and feature lists tab \u00b6 [1]: The (raw) ms data and feature list tabs. Here you can find your imported data files and processed feature lists. Hint: you can also import files by dragging & dropping them to the ms data tab. Main content pane \u00b6 [2]: The main content pane. Visualisations such as a raw data overview or a feature list can be viewed here. This pane can also contain multiple tabs. Every tab can also be opened in a new seperate window by right clicking on the header. Main menu \u00b6 [3]: The main menu. Here you can find methods to import and process your data files and feature lists and visualise the results. Furthermore, projects can be saved and preferences can be set. Task overview \u00b6 [4]: The task overview. Current tasks are displayed and their status and progress are indicated. Tasks can also be canceled by right clicking on a task.","title":"Main window overview"},{"location":"Main-window-overview/#main-window-overview","text":"The MZmine 3 man window is made up of mainly four important building blocks.","title":"Main window overview"},{"location":"Main-window-overview/#ms-data-files-and-feature-lists-tab","text":"[1]: The (raw) ms data and feature list tabs. Here you can find your imported data files and processed feature lists. Hint: you can also import files by dragging & dropping them to the ms data tab.","title":"MS data files and feature lists tab"},{"location":"Main-window-overview/#main-content-pane","text":"[2]: The main content pane. Visualisations such as a raw data overview or a feature list can be viewed here. This pane can also contain multiple tabs. Every tab can also be opened in a new seperate window by right clicking on the header.","title":"Main content pane"},{"location":"Main-window-overview/#main-menu","text":"[3]: The main menu. Here you can find methods to import and process your data files and feature lists and visualise the results. Furthermore, projects can be saved and preferences can be set.","title":"Main menu"},{"location":"Main-window-overview/#task-overview","text":"[4]: The task overview. Current tasks are displayed and their status and progress are indicated. Tasks can also be canceled by right clicking on a task.","title":"Task overview"},{"location":"Raw-data-visualisation/","text":"Raw data visualisation \u00b6 Raw data overview (LC-MS) \u00b6 Ion mobility raw data overview (LC-IMS-MS) \u00b6 Chromatogram plot \u00b6 Spectrum plot \u00b6","title":"Raw data visualisation"},{"location":"Raw-data-visualisation/#raw-data-visualisation","text":"","title":"Raw data visualisation"},{"location":"Raw-data-visualisation/#raw-data-overview-lc-ms","text":"","title":"Raw data overview (LC-MS)"},{"location":"Raw-data-visualisation/#ion-mobility-raw-data-overview-lc-ims-ms","text":"","title":"Ion mobility raw data overview (LC-IMS-MS)"},{"location":"Raw-data-visualisation/#chromatogram-plot","text":"","title":"Chromatogram plot"},{"location":"Raw-data-visualisation/#spectrum-plot","text":"","title":"Spectrum plot"},{"location":"lcms-workflow/","text":"LC-MS Workflow \u00b6 Raw data processing \u00b6 Raw data import \u00b6 Raw data can be imported via the main menu Raw data methods \u2192 Raw data import . Note that multiple data files/folders can be dropped into the MS data (advanced) dialog. If individual modules are used, folder based formats can only imported as one folder at a time. When using the MS data (advanced) dialog, inexperienced users should deactivate the direct mass detection steps, since they alter the raw data on the import. Mass detection is then performend, when the scans are loaded and only peaks above the noise level are imported. Alternatively, you can simply drag & drop the raw data into the raw data list of the main window. Mass detection \u00b6 The mass detection steps perform noise filtering (by a threshold) and centroiding of profile raw data. The raw data format can either be centroided or in profile mode. If the data is centroided, the centroid mass detector can be used. Profile data requires a different mass detector such as exact mass . The mass detection is launched via Raw data methods \u2192 Mass detection \u2192 Mass detection ([1] in the figure). In the dropdown menu [2], an applicable mass detector should be chosen and configured via the Setup button [2]. By selecting the Show preview checkbox, a scan can be selected to adjust the noise level. The output of the mass detection step, can be referred to as mass list , since it will only contain a list of selected m/z values. Setting the noise level \u00b6 Choose the noise level to detect (= red dot) actual peaks but filter out detector noise. The detector noise is usually determined by a lot of signals of the same intensity. Feature processing \u00b6 After raw data processing, the first step of feature detection is building extracted ion chromatograms (EICs). This step can be executed by the ADAP chromatogram builder or Grid mass . ADAP chromatogram builder \u00b6 Scan selection \u00b6 The scan selection parameter specifies the scans that shall be processed for feature detection. Usually, setting the ms level to 1 is sufficient. If a calibration segment is present, it can be cut out via the retention time filter in the scan selection. Min group size in # of scans \u00b6 This parameter specifies the number of consecutive detections of the same m/z value in a chromatographic peak (rt dimension). This means that a single m/z has to be detected in, e.g, 5 scans with an intensity higher than zero. This parameter helps to filter noise. Usually no less than 5 should be set here if the MS1 acquisition rate is sufficient. Group intensity threshold \u00b6 Specifies a minimum intensity that the number specified by min group size have to exceed. In this example, the intensity in at least 5 scans must be above 5E2. Minimum highest intensity \u00b6 The highest point of a potential EIC must exceed this value. Scan to scan accuracy (m/z) \u00b6 The m/z tolerance specifies the scan-to-scan tolerance for EICs. This tolerance depends on the mass accuracy and resolution of the instrument. Usually, a good starting point for optimisations are 0.005 and 5-10 ppm for Orbitrap instruments, while 0.005 and 10-15 ppm can be used for TOF instruments. Smoothing in retention time dimension (optional) \u00b6 The necessity of smoothing in RT dimension is determined by the noisiness of chromatographic peaks. These can be influenced by the overall spray stability, instrument accumulation times, transfer efficiency and many more. The number of data points to be smoothed in rt dimension can be set at [1]. Note that the correct preview dimension is selected at [2]. For large batch modes, the Remove original feature list parameter should be selected. While parameters are being optimised, this is not recommended, because removing a feature list cannot be undone. Feature resolving \u00b6 Here, the Feature detection \u2192 Resolving \u2192 Local minimum resolver is used. However, the ADAP resolver also produces great results, but takes longer to process. Resolving traces/chromatograms into individual features, is one of the most crucial steps of data processing. Well optimised parameters [1] can lead to recognition of all good features in a \"good\" EICs [2] and to few noise recognised as feature in EIC that also contains chromatographic noise [3]. On the other hand, poorly optimised parameters [4] can still lead to recognition of all features in a good EIC [5], but recognise a lot of noise as feature in a noisy EIC [6]. Therefore, we recommend optimising the parameters on good EICs and checking the results of these parameters with a noisy EIC. Most of the time, a noisy EIC can be found by sorting the feature table by decreasing area. MS/MS scan paring \u00b6 Selecting this parameter will pair DDA MS/MS spectra to the resolved features. This is optional at this stage, because it will be executed again during resolving in the mobility dimension. Dimension \u00b6 The dimension to be resolved can be selected here. Select Retention time . Chromatographic threshold \u00b6 This parameter is crucial for removing noise from chromatograms. If this parameter is set to, e.g., 50, the lowest 50 % of intensities will be removed. Since the all retention time in the data file are used for this determination, this value should be rather high (e.g., 95 %) to begin with and only lowered if necessary. Search minimum rt range (min) \u00b6 Determines the step size that will be scanned for individual peaks. Setting this value too low, can cause peak edges to be cut off, setting it too high might lead to incomplete separation of narrowly eluting compounds. Minimum relative height \u00b6 Determines the minimum relative intensity of a individual feature in relation to the highest intensity in the chromatogram. May lead to discrimination of low intensity features. Minimum absolute height \u00b6 Determines the minimum absolute intensity of a feature to be recognised by the algorithm. This parameter depends on what you want to detect, the instrument and detector type. Usually, Orbitrap instruments report higher intensities that TOF instruments. However, the noise level is also higher for Orbitrap than for TOF instruments. For TOF instruments 1E3 or even 5E2 can be appropriate, whilst Orbitraps can require 1E5 or 5E4. Min ration of peak top/edge \u00b6 Describes the minimum ratio of the highest point of a peak to the lowest point of a peak. This mostly affects detection of low intensity and not-baseline-resolved signals and should be optimised using such a signal as an example. Peak duration range \u00b6 Describes valid peak lengths. Can be used to filter out very short or long noise signals. Minimum number of data points \u00b6 Can be used in addition to Peak duration range to filter out noise. Should be set no lower than 5 in most cases.","title":"LC-MS workflow"},{"location":"lcms-workflow/#lc-ms-workflow","text":"","title":"LC-MS Workflow"},{"location":"lcms-workflow/#raw-data-processing","text":"","title":"Raw data processing"},{"location":"lcms-workflow/#raw-data-import","text":"Raw data can be imported via the main menu Raw data methods \u2192 Raw data import . Note that multiple data files/folders can be dropped into the MS data (advanced) dialog. If individual modules are used, folder based formats can only imported as one folder at a time. When using the MS data (advanced) dialog, inexperienced users should deactivate the direct mass detection steps, since they alter the raw data on the import. Mass detection is then performend, when the scans are loaded and only peaks above the noise level are imported. Alternatively, you can simply drag & drop the raw data into the raw data list of the main window.","title":"Raw data import"},{"location":"lcms-workflow/#mass-detection","text":"The mass detection steps perform noise filtering (by a threshold) and centroiding of profile raw data. The raw data format can either be centroided or in profile mode. If the data is centroided, the centroid mass detector can be used. Profile data requires a different mass detector such as exact mass . The mass detection is launched via Raw data methods \u2192 Mass detection \u2192 Mass detection ([1] in the figure). In the dropdown menu [2], an applicable mass detector should be chosen and configured via the Setup button [2]. By selecting the Show preview checkbox, a scan can be selected to adjust the noise level. The output of the mass detection step, can be referred to as mass list , since it will only contain a list of selected m/z values.","title":"Mass detection"},{"location":"lcms-workflow/#setting-the-noise-level","text":"Choose the noise level to detect (= red dot) actual peaks but filter out detector noise. The detector noise is usually determined by a lot of signals of the same intensity.","title":"Setting the noise level"},{"location":"lcms-workflow/#feature-processing","text":"After raw data processing, the first step of feature detection is building extracted ion chromatograms (EICs). This step can be executed by the ADAP chromatogram builder or Grid mass .","title":"Feature processing"},{"location":"lcms-workflow/#adap-chromatogram-builder","text":"","title":"ADAP chromatogram builder"},{"location":"lcms-workflow/#scan-selection","text":"The scan selection parameter specifies the scans that shall be processed for feature detection. Usually, setting the ms level to 1 is sufficient. If a calibration segment is present, it can be cut out via the retention time filter in the scan selection.","title":"Scan selection"},{"location":"lcms-workflow/#min-group-size-in-of-scans","text":"This parameter specifies the number of consecutive detections of the same m/z value in a chromatographic peak (rt dimension). This means that a single m/z has to be detected in, e.g, 5 scans with an intensity higher than zero. This parameter helps to filter noise. Usually no less than 5 should be set here if the MS1 acquisition rate is sufficient.","title":"Min group size in # of scans"},{"location":"lcms-workflow/#group-intensity-threshold","text":"Specifies a minimum intensity that the number specified by min group size have to exceed. In this example, the intensity in at least 5 scans must be above 5E2.","title":"Group intensity threshold"},{"location":"lcms-workflow/#minimum-highest-intensity","text":"The highest point of a potential EIC must exceed this value.","title":"Minimum highest intensity"},{"location":"lcms-workflow/#scan-to-scan-accuracy-mz","text":"The m/z tolerance specifies the scan-to-scan tolerance for EICs. This tolerance depends on the mass accuracy and resolution of the instrument. Usually, a good starting point for optimisations are 0.005 and 5-10 ppm for Orbitrap instruments, while 0.005 and 10-15 ppm can be used for TOF instruments.","title":"Scan to scan accuracy (m/z)"},{"location":"lcms-workflow/#smoothing-in-retention-time-dimension-optional","text":"The necessity of smoothing in RT dimension is determined by the noisiness of chromatographic peaks. These can be influenced by the overall spray stability, instrument accumulation times, transfer efficiency and many more. The number of data points to be smoothed in rt dimension can be set at [1]. Note that the correct preview dimension is selected at [2]. For large batch modes, the Remove original feature list parameter should be selected. While parameters are being optimised, this is not recommended, because removing a feature list cannot be undone.","title":"Smoothing in retention time dimension (optional)"},{"location":"lcms-workflow/#feature-resolving","text":"Here, the Feature detection \u2192 Resolving \u2192 Local minimum resolver is used. However, the ADAP resolver also produces great results, but takes longer to process. Resolving traces/chromatograms into individual features, is one of the most crucial steps of data processing. Well optimised parameters [1] can lead to recognition of all good features in a \"good\" EICs [2] and to few noise recognised as feature in EIC that also contains chromatographic noise [3]. On the other hand, poorly optimised parameters [4] can still lead to recognition of all features in a good EIC [5], but recognise a lot of noise as feature in a noisy EIC [6]. Therefore, we recommend optimising the parameters on good EICs and checking the results of these parameters with a noisy EIC. Most of the time, a noisy EIC can be found by sorting the feature table by decreasing area.","title":"Feature resolving"},{"location":"lcms-workflow/#msms-scan-paring","text":"Selecting this parameter will pair DDA MS/MS spectra to the resolved features. This is optional at this stage, because it will be executed again during resolving in the mobility dimension.","title":"MS/MS scan paring"},{"location":"lcms-workflow/#dimension","text":"The dimension to be resolved can be selected here. Select Retention time .","title":"Dimension"},{"location":"lcms-workflow/#chromatographic-threshold","text":"This parameter is crucial for removing noise from chromatograms. If this parameter is set to, e.g., 50, the lowest 50 % of intensities will be removed. Since the all retention time in the data file are used for this determination, this value should be rather high (e.g., 95 %) to begin with and only lowered if necessary.","title":"Chromatographic threshold"},{"location":"lcms-workflow/#search-minimum-rt-range-min","text":"Determines the step size that will be scanned for individual peaks. Setting this value too low, can cause peak edges to be cut off, setting it too high might lead to incomplete separation of narrowly eluting compounds.","title":"Search minimum rt range (min)"},{"location":"lcms-workflow/#minimum-relative-height","text":"Determines the minimum relative intensity of a individual feature in relation to the highest intensity in the chromatogram. May lead to discrimination of low intensity features.","title":"Minimum relative height"},{"location":"lcms-workflow/#minimum-absolute-height","text":"Determines the minimum absolute intensity of a feature to be recognised by the algorithm. This parameter depends on what you want to detect, the instrument and detector type. Usually, Orbitrap instruments report higher intensities that TOF instruments. However, the noise level is also higher for Orbitrap than for TOF instruments. For TOF instruments 1E3 or even 5E2 can be appropriate, whilst Orbitraps can require 1E5 or 5E4.","title":"Minimum absolute height"},{"location":"lcms-workflow/#min-ration-of-peak-topedge","text":"Describes the minimum ratio of the highest point of a peak to the lowest point of a peak. This mostly affects detection of low intensity and not-baseline-resolved signals and should be optimised using such a signal as an example.","title":"Min ration of peak top/edge"},{"location":"lcms-workflow/#peak-duration-range","text":"Describes valid peak lengths. Can be used to filter out very short or long noise signals.","title":"Peak duration range"},{"location":"lcms-workflow/#minimum-number-of-data-points","text":"Can be used in addition to Peak duration range to filter out noise. Should be set no lower than 5 in most cases.","title":"Minimum number of data points"}]}